<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Batalha V/F 1x1</title>
  <style>
    :root{
      --bg-image: url('/mnt/data/649fc95f-a615-4941-8950-360c0a24620f.png');
      --card: rgba(255,255,255,0.95);
      --accent: #118341;
      --danger: #cf2a2a;
      --glass: rgba(255,255,255,0.8);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter, Poppins, system-ui, sans-serif}
    body{
      min-height:100vh;
      background-image: var(--bg-image);
      background-size: cover;
      background-position:center;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .wrap{
      width:100%;
      max-width:1100px;
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(250,250,250,0.9));
      border-radius:12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      padding:18px;
      display:flex;
      gap:18px;
      flex-direction:column;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    header h1{
      font-size:1.4rem;
      color:#0b3f25;
    }
    .controls{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .btn{
      padding:8px 14px;
      border-radius:8px;
      border:none;
      cursor:pointer;
      font-weight:600;
      background:var(--accent);
      color:white;
    }
    .btn.secondary{background:#666;color:white}
    main{
      display:flex;
      gap:18px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    .question-card{
      flex:1 1 100%;
      background:var(--card);
      border-radius:10px;
      padding:14px;
    }
    .meta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    .meta .timer{
      font-size:1.2rem;
      font-weight:700;
      color:var(--danger);
    }
    .question{
      font-size:1.25rem;
      color:#083420;
      margin-bottom:6px;
      min-height:48px;
    }
    .sub{
      font-size:0.95rem;
      color:#375645;
      opacity:0.9;
    }

    .players{
      display:flex;
      gap:12px;
      margin-top:12px;
      flex-wrap:wrap;
    }

    .player{
      flex:1 1 300px;
      background:var(--glass);
      border-radius:10px;
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:center;
      box-shadow: 0 6px 14px rgba(0,0,0,0.08);
    }
    .player h2{font-size:1rem;color:#0e2f1f}
    .score{
      font-size:2rem;
      font-weight:800;
      color:#0b3f25;
    }

    .buttons{
      display:flex;
      gap:12px;
      width:100%;
      justify-content:center;
    }
    .choice{
      flex:1 1 45%;
      padding:12px;
      border-radius:10px;
      border:none;
      font-size:1.05rem;
      cursor:pointer;
      font-weight:700;
      transition:transform .12s ease;
    }
    .choice:active{transform:scale(.98)}
    .true{background:#1db954;color:white}
    .false{background:#e03a3a;color:white}

    .status{
      font-size:0.95rem;
      min-height:1.2rem;
      color:#06361f;
    }

    .footer{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      margin-top:12px;
      flex-wrap:wrap;
    }
    .round-info{color:#234a34;font-weight:600}
    .small{font-size:0.9rem;color:#3a5b47}
    .next{background:#0b6f3e;color:white;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:700}

    /* mobile tweaking */
    @media (max-width:720px){
      .players{flex-direction:column}
      .btn{padding:8px 10px;font-size:0.9rem}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Batalha Verdadeiro ou Falso â€” 1x1</h1>
      <div class="controls">
        <div class="round-info">Pergunta: <span id="round">0</span>/<span id="total">0</span></div>
        <button id="reset" class="btn secondary">Reiniciar</button>
      </div>
    </header>

    <main>
      <section class="question-card">
        <div class="meta">
          <div>
            <div class="question" id="question">Carregando perguntas...</div>
            <div class="sub">Clique em Verdadeiro ou Falso â€” quem responder ganha pontos. BÃ´nus de rapidez para quem responder primeiro entre os corretos.</div>
          </div>
          <div class="timer" id="timer">--</div>
        </div>

        <div class="players">
          <div class="player" id="player1">
            <h2>Jogador 1</h2>
            <div class="score" id="score1">0</div>
            <div class="buttons">
              <button class="choice true" data-player="1" data-choice="true">Verdadeiro</button>
              <button class="choice false" data-player="1" data-choice="false">Falso</button>
            </div>
            <div class="status" id="status1"></div>
          </div>

          <div class="player" id="player2">
            <h2>Jogador 2</h2>
            <div class="score" id="score2">0</div>
            <div class="buttons">
              <button class="choice true" data-player="2" data-choice="true">Verdadeiro</button>
              <button class="choice false" data-player="2" data-choice="false">Falso</button>
            </div>
            <div class="status" id="status2"></div>
          </div>
        </div>

        <div class="footer">
          <div class="small" id="feedback">Tempo por pergunta: 12s â€¢ Pontos: acerto +1 â€¢ BÃ´nus rapidez +1</div>
          <div>
            <button id="next" class="next">PrÃ³xima (pular)</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ====== CONFIGURAÃ‡ÃƒO ======
    const PERGUNTAS = [
      { q: "O Sol Ã© uma estrela.", a: true },
      { q: "A Ã¡gua ferve a 90Â°C ao nÃ­vel do mar.", a: false },
      { q: "O Brasil jÃ¡ sediou a Copa do Mundo de Futebol.", a: true },
      { q: "Os humanos tÃªm trÃªs pulmÃµes.", a: false },
      { q: "A luz viaja mais rÃ¡pido que o som.", a: true },
      { q: "O elemento quÃ­mico Au Ã© prata.", a: false },
      { q: "A baleia azul Ã© o maior animal conhecido.", a: true },
      { q: "A capital da FranÃ§a Ã© Lyon.", a: false },
      { q: "A Terra tem um Ãºnico satÃ©lite natural (a Lua).", a: true },
      { q: "A eletricidade foi descoberta antes da invenÃ§Ã£o da roda.", a: false }
    ];
    const TIME_PER_QUESTION = 12; // segundos
    const BONUS_RAPIDEZ_MS = 700; // janela para bÃ´nus (se ambos corretos, quem entrou primeiro dentro dessa janela ganha)
    // ===========================

    // estado
    let questions = [...PERGUNTAS];
    let index = 0;
    let timer = null;
    let timeLeft = TIME_PER_QUESTION;
    let scores = {1:0, 2:0};
    let answered = {1:false, 2:false};
    let answerTimes = {1:null,2:null};
    let total = questions.length;

    // DOM
    const qEl = document.getElementById('question');
    const tEl = document.getElementById('timer');
    const score1El = document.getElementById('score1');
    const score2El = document.getElementById('score2');
    const status1 = document.getElementById('status1');
    const status2 = document.getElementById('status2');
    const roundEl = document.getElementById('round');
    const totalEl = document.getElementById('total');
    const nextBtn = document.getElementById('next');
    const resetBtn = document.getElementById('reset');

    totalEl.textContent = total;

    // inicializar
    function startBattle(){
      // embaralhar perguntas (opcional)
      questions = shuffleArray(questions);
      index = 0;
      scores = {1:0,2:0};
      updateScores();
      loadQuestion();
    }

    function loadQuestion(){
      if (index >= questions.length){
        showFinal();
        return;
      }
      // reset estado por pergunta
      answered = {1:false,2:false};
      answerTimes = {1:null,2:null};
      timeLeft = TIME_PER_QUESTION;
      clearStatus();
      const q = questions[index];
      qEl.textContent = q.q;
      roundEl.textContent = index+1;
      tEl.textContent = formatTime(timeLeft);
      enableChoices(true);

      // comeÃ§ar contador
      if (timer) clearInterval(timer);
      timer = setInterval(()=>{
        timeLeft--;
        tEl.textContent = formatTime(timeLeft);
        if (timeLeft <= 0){
          clearInterval(timer);
          evaluateRound('timeout');
        }
      }, 1000);
    }

    // botÃ£o de escolha (evento delegaÃ§Ã£o)
    document.addEventListener('click', function(e){
      const btn = e.target.closest('.choice');
      if (!btn) return;
      const player = Number(btn.dataset.player);
      const choice = btn.dataset.choice === 'true';
      if (answered[player]) return; // jÃ¡ respondeu
      // registrar tempo
      answerTimes[player] = performance.now();
      answered[player] = true;
      // marcar visualmente
      const st = player === 1 ? status1 : status2;
      st.textContent = "Respondido";
      // desativar apenas o jogador que respondeu
      togglePlayerButtons(player, false);
      // Se ambos responderam, avalia agora
      if (answered[1] && answered[2]){
        if (timer) clearInterval(timer);
        evaluateRound('bothAnswered', {p1choice: getPlayerChoice(1), p2choice: getPlayerChoice(2)});
      } else {
        // Salva escolha temporariamente
        storeChoice(player, choice);
      }
    });

    // armazenar escolhas para depois
    const _choices = {1:null,2:null};
    function storeChoice(player, bool){
      _choices[player] = bool;
    }
    function getPlayerChoice(player){
      return _choices[player];
    }

    // avaliaÃ§Ã£o final do round
    function evaluateRound(reason, extras = {}){
      // se veio por timeout, use escolhas registradas (pode ser null)
      const correct = questions[index].a;
      const p1 = _choices[1];
      const p2 = _choices[2];

      // resultados individuais
      const p1Correct = (p1 === correct);
      const p2Correct = (p2 === correct);

      // atribuir pontos bÃ¡sicos
      if (p1Correct) scores[1] += 1;
      if (p2Correct) scores[2] += 1;

      // bÃ´nus por rapidez (apenas entre corretos)
      if (p1Correct && p2Correct && answerTimes[1] && answerTimes[2]){
        const diff = Math.abs(answerTimes[1] - answerTimes[2]);
        if (diff <= BONUS_RAPIDEZ_MS){
          // quem respondeu primeiro ganha bÃ´nus
          if (answerTimes[1] < answerTimes[2]) scores[1] += 1;
          else scores[2] += 1;
        } else {
          // quem respondeu primeiro, mesmo que por muito, ganha
          if (answerTimes[1] < answerTimes[2]) scores[1] += 1;
          else scores[2] += 1;
        }
      } else if (p1Correct && !p2Correct && answerTimes[1]){
        // bÃ´nus se o outro errou
        scores[1] += 0; // sem bÃ´nus adicional (jÃ¡ ganhou +1). altere se quiser +1 extra
      } else if (p2Correct && !p1Correct && answerTimes[2]){
        scores[2] += 0;
      }

      // montar feedback
      status1.textContent = buildStatusText(p1, p1Correct);
      status2.textContent = buildStatusText(p2, p2Correct);

      // atualizar placares
      updateScores();

      // desativar ambos
      enableChoices(false);

      // limpar escolhas guardadas para prÃ³xima
      _choices[1] = null; _choices[2] = null;

      // avanÃ§ar daqui 1.2s para prÃ³xima
      setTimeout(()=> {
        index++;
        loadQuestion();
      }, 1200);
    }

    function buildStatusText(choice, correct){
      if (choice === null) return "Sem resposta";
      return (choice === correct) ? "Correto âœ“" : "Errado âœ•";
    }

    function updateScores(){
      score1El.textContent = scores[1];
      score2El.textContent = scores[2];
    }

    function showFinal(){
      enableChoices(false);
      qEl.textContent = "ðŸŽ‰ Fim das perguntas!";
      tEl.textContent = "--";
      const final = scores[1] === scores[2] ? "Empate!" : (scores[1] > scores[2] ? "Jogador 1 venceu!" : "Jogador 2 venceu!");
      status1.textContent = `Resultado: ${scores[1]} pontos`;
      status2.textContent = `Resultado: ${scores[2]} pontos`;
      document.getElementById('feedback').textContent = final + " â€¢ Clique em Reiniciar para jogar novamente.";
    }

    // habilitar/desabilitar escolhas
    function enableChoices(state){
      const btns = document.querySelectorAll('.choice');
      btns.forEach(b => b.disabled = !state);
      if (!state) btns.forEach(b => b.style.opacity = 0.65);
      else btns.forEach(b => b.style.opacity = 1);
    }
    function togglePlayerButtons(player, state){
      const btns = document.querySelectorAll(`.choice[data-player="${player}"]`);
      btns.forEach(b => { b.disabled = !state; b.style.opacity = state?1:0.65; });
    }

    function clearStatus(){
      status1.textContent = '';
      status2.textContent = '';
      document.getElementById('feedback').textContent = `Tempo por pergunta: ${TIME_PER_QUESTION}s â€¢ Pontos: acerto +1 â€¢ BÃ´nus rapidez possÃ­vel`;
    }

    // manipulaÃ§Ã£o do botÃ£o "PrÃ³xima (pular)"
    nextBtn.addEventListener('click', ()=>{
      if (timer) clearInterval(timer);
      evaluateRound('skipped');
    });

    // reiniciar
    resetBtn.addEventListener('click', ()=>{
      startBattle();
    });

    // utilitÃ¡rios
    function formatTime(sec){
      return `${sec}s`;
    }
    function shuffleArray(arr){
      for (let i = arr.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // pequenas proteÃ§Ãµes contra cliques mÃºltiplos rapidos
    document.addEventListener('keydown', (e)=>{
      // opcional: atalhos p1: Q W, p2: O P
      if (e.key.toLowerCase() === 'q'){ document.querySelector('.choice[data-player="1"][data-choice="true"]').click(); }
      if (e.key.toLowerCase() === 'w'){ document.querySelector('.choice[data-player="1"][data-choice="false"]').click(); }
      if (e.key.toLowerCase() === 'o'){ document.querySelector('.choice[data-player="2"][data-choice="true"]').click(); }
      if (e.key.toLowerCase() === 'p'){ document.querySelector('.choice[data-player="2"][data-choice="false"]').click(); }
    });

    // iniciar automaticamente
    startBattle();
  </script>
</body>
</html>
